
=CashHoppers project

Hosting: http://perechin.net:3000/

Before you start:
    rake db:seed
    //generate first admin user
    //email admin@cashhoppers.com
    //password qwerty11

Run server: rails s thin

==API documentation

Android API key: DI2YWC2YvoEGLXwstpKw4JFJ9R6tiL 

===sign_up method:POST

-request: JSON
    curl -H "Accept: application/json" -H "Content-Type: application/json" -X POST -d '{"api_key":"*your api key",
    "email":"my.email@gmail.com","password":"qwerty11","password_confirmation":"qwerty11", "first_name":"myFirstName",
    "last_name":"MyLastName","user_name":"username","zip":"12321","avatar_content_type":"image/jpeg",
    "avatar_original_filename":"myavatar.jpg","base64avatar":"/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS
    4wICh1c2luZyBJSkcgSlBFRyB2ODApLCBxdWFsaXR5ID0gOTUK/9sAQwACAQEBAQECAQEBAgICAgIEAwICAgIFBAQDBAYFBgYGBQYGBgcJCAYHCQcGBg
    gLCAkKCgoKCgYICwwLCgwJCgoK/9sAQwECAgICAgIFAwMFCgcGBwoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg
    oK/8AAEQgAMgAyAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBh
    NRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5
    SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAg
    MEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OT
    pDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2u
    Lj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/frjsP5Ucen8qM8fe/WjJz979aAA49KOPT+VGf8Aa7+tGR/eoAOPT+VHHp+ooyOPmoz/ALX60A
    GD2X+VFGV/vmigDnfi7ca1Z/C3xDf+Hddn0y/ttHuJ7TULaKJ3gkSNnVgsyOh5HRlIxmvMf2N/iV4u+JX7D/hr4w/GL4iXM+pa54YfUtY1s28FubUMrF
    mjWGNUVUUZGVJ45Jr0f44anYaL8GvFWpalcLDDH4fu9zucDJhYAD1JJAA6kkAV8qfC3xza+F/+CK8lrbSsNZsvhbe6OumbG+0pqT20scduYvviUs6EJj
    JBB6HNe7gcKsVlnKo6yr043srpSi769r622utT5vMcY8Jm/M5Pljh6suW7s3GStpfe10nvZ6F7xB+2N8TEsU0jTfEtouvXkreHoW+X7JH4qtB9rs4j6W
    esWm0xsD8mVCne5I639iH9tnVP2tfix4xkTT59O0GDwl4f1Lw/pN5a+XPA8/22O9DkgFyJ4dgb7pVFKj5iT43+1h+yHrHjzWfhs/wogubzw18SvDmn+E
    vGF3ouHOn3FlD9p0vW0IIw0BilRnyMxfuwcuK9P0SXw18HP+CoUnh8Tiz0fXfglYafFdSJthbUoNSlEUDOAEWZ4ZSwU4LdhyK9ythcnq5ZJUIJ1ZQnNd
    48koppru9bdbaq6bt87hsXnlHNYPETapRqU4PtL2kZuLTfRe7fo3o7NK/V/B3xn8WP2zLDVPir4Y+L2o+CfAq63eab4Ti8M2FlJe6rFazvbyXs817BOq
    I8scgSKONCFUFnbdgd38IPAXx18B+P9ctPH/xsvfGfhebT7VtAl1jTLKC9tbnfMLhJHtIYllXb5JVigxlhzjNeCfsofEI/sBabqv7Jv7SWl6jo/h3SNe
    vrn4feOzp00ul6jptzcPcLDLPGrLb3EbySBll2ggjaSME7f7JWqab8Rv23PjD8Q/BWtaxqngtdK0NfDV+91dvpjXckc7X32bzD5RYssW/YOMjpnngx2C
    nB4n2SisPGN4Pli1KPNBRtPdTd7y9691NOKsrenl+OpS+qKs5PEyk1UjzyTjLlm5XhezgrWjaNrODUnd3+qfn9qKOPf9aK+VPsxCARgkflSeWv90flS/
    h/Kg/7tAAABwMflRsUnOBn6UHHpRx/nFAAUDdQD+FIEVRkAflS8f5xRxjp/KgB3PqPyopvH+cUUAICSDk0pJ55oooAMnPX/OaXJ9f85oooAATkc0mTjr
    /nFFFADqKKKAP/2Q=="}'  http://perechin.net:3000/api/sign_up
-response:
    {"message":"Check your email and confirm registration.","success":true,"user":{"avatar_content_type":null,
    "avatar_file_name":null,"avatar_file_size":null,"avatar_updated_at":null,	"created_at":"2013-06-27T12:08:15Z",
    "email":"misha.skubch@gmail.com","first_name":"myFirstName","id":49,"last_name":"MyLastName",
    "updated_at":"2013-06-27T12:08:15Z","user_name":"username","zip":12321}}

===confirm_registration method:POST

-request: JSON
    curl -H "Accept: application/json" -H "Content-Type: application/json" -X POST -d '{"api_key":"*your api key",
    "confirmation_token":"*confirmation token from confirmation email"}' http://localhost:3000/api/confirm_registration
-response:
    {"message":"Confirmation successfully.","success":true}
	
===login method:POST

-request: REST
    curl -X POST -d "api_key=1234567&email=some%2Etest%2Eemail@gmail%2Ecom&password=password11"
    http://localhost:3000/api/sessions
-request: JSON
    curl -H "Accept: application/json" -H "Content-Type: application/json" -X POST -d '{"api_key":"application key",
    "email":"my.email@gmail.com","password":"mysecret"}'  http://localhost:3000/api/sessions
-response:
    {"authentication_token":"gTx2aQWtyQmxCXaLqjWq","user":{"created_at":"2013-06-20T09:29:20Z",
    "email":"some.test.email@gmail.com","id":19,"updated_at":"2013-06-20T 09:29:56Z"}}

===sign_in via Facebook and Twitter

    curl -H "Content-Type: application/json" -X POST -d '{"api_key":"vsOQpMKst8MU0ULwK9iCanGj1uEHqm",
    "email": "misha.skubenich@gmail.com","name": "Misha  Skubenich","uid": "100004130052528","provider": "facebook",
    "zip": "88000"}'  http://localhost:3000/api/sign_in_via_service

    curl -H "Content-Type: application/json" -X POST -d '{"api_key":"vsOQpMKst8MU0ULwK9iCanGj1uEHqm",
    "email": "misha.skubenich@gmail.com","name": "misha.skubenich","uid": "392549959","provider": "twitter",
    "zip": "88000"}'  http://localhost:3000/api/sign_in_via_service

You can receive email, name, uid here:
Facebook: http://localhost:3000/auth/facebook
Twitter: http://localhost:3000/auth/twitter

provider can be 'facebook' and 'twitter'

===sessions method:DELETE

request: REST
    curl -X DELETE -d "api_key=1234567&authentication_token=vtqY8PBFx2wWNmPT2L2X" http://localhost:3000/api/sessions
request: JSON
    curl -H "Accept: application/json" -H "Content-Type: application/json" -X DELETE -d '{"api_key":"application key",
    "authentication_token":"vtqY8PBFx2wWNmPT2L2X","password":"mysecret"}' http://localhost:3000/api/sessions
response:
    {"message":["Session deleted."]}

===send_ad method:POST

request JSON:
    curl -H ent-Type: application/json" -X POST -d '{"ad_type": "2","hop_id":"2"}'  http://localhost:3000/api/send_ad
response JSON
    {"picture_url":"/images/ad_pictures/ads/4/AD_PICTURE.jpg?1372405353","success":true}

===hops method:GET
Return all regular hops (not daily) by 10 per page(default)

request JSON:


    curl -H "Content-Type: application/json" -X GET -d '{"api_key":"123", "page":"45", "per_page":"15"}'  http://localhost:3000/api/get_hops

Return curr date daily hops

request JSON:

response JSON: 
          hops: [ 
                  name,
                  time_start,
                  time_end,
                  hop_code,
                  hop_price,
                  jackpot,
                  hop_items,
                  daily_hop,
                  close,
                  event,
                  created_at,
                  updated_at
                ]
===ads method:GET

Return ads by ad_type

request: ads.json?api_key={api_key}&ad_type={ad_type}

Return ads by hop_id

request: ads.json?api_key={api_key}&hop_id={hop_id}

response JSON: 
            ads: [  
                    id,
                    ad_name,
                    ad_type,
                    link_to_ad,
                    hop_id,
                    created_at,
                    updated_at,
                    hop_ad_picture_updated_at,
                    ad_picture_url
                ]


